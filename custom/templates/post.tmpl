{#  -*- coding: utf-8 -*- #}
{% import 'post_helper.tmpl' as helper with context %}
{% import 'post_header.tmpl' as pheader with context %}
{% import 'comments_helper.tmpl' as comments with context %}
{% extends 'base.tmpl' %}

{% block extra_head %}
    {{ super() }}
    {% if post.meta('keywords') %}
        <meta name="keywords" content="{{ post.meta('keywords')|e }}">
    {% endif %}
    <meta name="author" content="{{ post.author() }}">
    {{ helper.open_graph_metadata(post) }}
    {{ helper.twitter_card_information(post) }}
    {{ helper.meta_translations(post) }}
{% endblock %}

{% block content %}
<article class="post-{{ post.meta('type') }} h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article">
    {{ pheader.html_post_header() }}
    <div class="e-content entry-content" itemprop="articleBody text">
    {{ post.text() }}
    </div>

    <hr>
    <div class="ps">
    {{ pheader.html_translations(post) }}
    <p>{{ messages("Source") }} <a href="https://github.com/mgaitan/mgaitan.github.com/blob/writing/{{ post.translated_source_path(lang) }}" id="sourcelink">github</a>. {{ messages("Source2") }} <a href="https://github.com/mgaitan/mgaitan.github.com/edit/writing/{{ post.translated_source_path(lang) }}" id="sourcelink">{{ messages("Source3")}}</a>.</p>
    </div>

    <aside class="postpromonav">
    <nav>
    {{ helper.html_tags(post) }}
    {{ helper.html_pager(post) }}
    </nav>
    </aside>
    {% if not post.meta('nocomments') and site_has_comments %}
        <section class="comments">
        <h2>{{ messages("Comments") }}</h2>
        {{ comments.comment_form(post.permalink(absolute=True), post.title(), post._base_path) }}
        </section>
    {% endif %}
    {{ helper.mathjax_script(post) }}
</article>
{{ comments.comment_link_script() }}
{% endblock %}

